{{define "main"}}
<h1 class="f1 mv0">TODOS</h1>
<p class="measure">This is a Go TODO App using WebSockets, HTMX, and DOM-Morphing brought to you by Bijan.</p>
<form hx-post="/add" hx-swap="morph" hx-target="#body" class="mt4">
    <div class="flex">
        <input type="text" name="title" required placeholder="Master HTMX" class="input-reset pa2 ba br3 br--left w-100 mw5" autofocus="true">
        <button type="submit" class="button-reset bn dim pointer bg-black ph3 pv2 br3 br--right f5 white"><span class="bg-white-20 inline-flex br-pill w1 h1 pa2 items-center justify-center fw7 f4 lh-solid">+</span> Add Todo</button>
    </div>
</form>
<div id="list-wrapper" hx-ext="ws" ws-connect="/ws">
    <ul id="list" class="list ph0 mt4">
        {{range .TodoList}}
        <li class="flex bg-black-20 pa2 justify-between">
            <div>
                <span class="{{if .Done}}strike{{else}}no-underline{{end}}">{{.Title}}</span>
            </div>
            <div>
                <button hx-patch="/toggle?id={{.ID}}" hx-swap="morph" hx-target="#list-wrapper" hx-select="#list" hx-trigger="click">{{if .Done}}Undo{{else}}Done{{end}}</button>
                <button hx-delete="/delete?id={{.ID}}" hx-swap="morph" hx-target="#list-wrapper" hx-select="#list" hx-trigger="click">Delete</button>
            </div>
        </li>
        {{end}}
    </ul>
</div>

{{if .TodoList}}
<div class="mt4">
    <button hx-get="/clear" hx-swap="morph" hx-target="#list-wrapper" hx-select="#list" hx-trigger="click">Clear All</button>
</div>
{{end}}


{{end}}
